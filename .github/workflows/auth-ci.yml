# .github/workflows/auth-ci.yml
name: CI - Auth Service

on:
  push:
    paths:
      - 'Implementation/**
  pull_request:
    paths:
      - 'Implementation/**

jobs:
  
  ############################
  # 1. Microservices Tests   #
  ############################

  auth-tests:
    runs-on: ubuntu-latest
    defaults:
      run:
        working-directory: Implementation/MicroserviceBackend/AuthenticationService/
    steps:
      - uses: actions/checkout@v3

      - name: linting + unit & integration tests
        run: npm run:test

  user-tests:
    runs-on: ubuntu-latest
    defaults:
      run:
        working-directory: Implementation/MicroserviceBackend/UserService/
    steps:
      - uses: actions/checkout@v3

      - name: linting + unit & integration tests
        run: npm run:test

  client-tests:
    runs-on: ubuntu-latest
    defaults:
      run:
        working-directory: Implementation/MicroserviceBackend/ClientService/
    steps:
      - uses: actions/checkout@v3

      - name: linting + unit & integration tests
        run: npm run:test

  network-tests:
    runs-on: ubuntu-latest
    defaults:
      run:
        working-directory: Implementation/MicroserviceBackend/ClientNetworkService/
    steps:
      - uses: actions/checkout@v3

      - name: linting + unit & integration tests
        run: npm run:test

  # sonarqube:
  #   name: SonarQube
  #   runs-on: ubuntu-latest
  #   needs: build-and-test

  #   defaults:
  #     run:
  #       working-directory: Implementation/MicroserviceBackend/AuthenticationService/
        
  #   steps:
  #     - uses: actions/checkout@v4
  #       with:
  #         fetch-depth: 0  

  #     - name: SonarQube Scan
  #       uses: SonarSource/sonarqube-scan-action@v5
  #       env:
  #         SONAR_TOKEN: ${{ secrets.SONAR_TOKEN }}
